<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mango Magneto-Meter</title>
    <style>
        body {
            margin: 0;
            background: #4caf50;
            font-family: 'Arial Black', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            text-align: center;
        }

        #mango-display {
            font-size: 5rem;
            margin-bottom: 20px;
            transition: transform 0.1s;
        }

        #status-text {
            color: yellow;
            font-size: 2rem;
            text-shadow: 2px 2px #000;
            height: 60px;
        }

        .lebron-container {
            position: relative;
            margin-top: 50px;
            cursor: pointer;
        }

        #lebron-img {
            width: 200px;
            border-radius: 50%;
            border: 5px solid gold;
            transition: 0.3s;
        }

        /* The Sunshine Effect */
        .sunshine {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255,255,0,1) 0%, rgba(255,255,0,0) 70%);
            transform: translate(-50%, -50%) scale(0);
            pointer-events: none;
            z-index: -1;
        }

        .active-sun .sunshine {
            animation: burst 1s ease-out;
        }

        @keyframes burst {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; }
        }

        button {
            padding: 15px 30px;
            font-size: 1.2rem;
            background: orange;
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div id="mango-display">ðŸ¥­</div>
    <div id="status-text">PRESS START</div>
    
    <div class="lebron-container" onclick="triggerLebron()">
        <div class="sunshine"></div>
        <img id="lebron-img" src="https://upload.wikimedia.org/wikipedia/commons/c/cf/LeBron_James_crop.jpg" alt="Lebron">
    </div>

    <br>
    <button id="startBtn">START SENSOR</button>

    <audio id="mangoAudio" src="https://www.myinstants.com/media/sounds/mango.mp3"></audio>
    <audio id="lebronScream" src="https://www.myinstants.com/media/sounds/lebron-james.mp3"></audio>

    <script>
        const statusText = document.getElementById('status-text');
        const mangoDisplay = document.getElementById('mango-display');
        const lebronContainer = document.querySelector('.lebron-container');
        const mangoAudio = document.getElementById('mangoAudio');
        const lebronScream = document.getElementById('lebronScream');

        function triggerLebron() {
            lebronContainer.classList.add('active-sun');
            lebronScream.play();
            setTimeout(() => {
                lebronContainer.classList.remove('active-sun');
            }, 1000);
        }

        document.getElementById('startBtn').onclick = async () => {
            document.getElementById('startBtn').style.display = 'none';
            
            try {
                // Check for Magnetometer sensor
                const sensor = new Magnetometer({frequency: 10});
                
                sensor.addEventListener('reading', () => {
                    // Total magnetic field strength
                    const mag = Math.sqrt(sensor.x**2 + sensor.y**2 + sensor.z**2);
                    
                    // Normal magnetic field is around 45-65 microteslas
                    if (mag > 150) { 
                        statusText.innerText = "MANGOS MANGOS MANGOS!!!";
                        mangoDisplay.style.transform = `scale(${1 + (mag/200)})`;
                        if (mangoAudio.paused) mangoAudio.play();
                    } else {
                        statusText.innerText = "Searching for mangos...";
                        mangoDisplay.style.transform = "scale(1)";
                    }
                });

                sensor.start();
            } catch (err) {
                statusText.innerText = "Sensor Error: Use a phone + HTTPS";
                console.error(err);
            }
        };
    </script>
</body>
</html>
